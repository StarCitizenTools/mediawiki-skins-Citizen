/*
 * Citizen
 *
 * SkinStyles for Extension:VisualEditor
 * Module: ext.visualEditor.desktopArticleTarget.init
 * Version: REL1_45
*/

@import '../../../resources/variables.less';

.ve-activated {
	--header-offset-block-start: calc( var( --header-size-block-start ) + var( --height-sticky-header ) + 48px );

	#citizen-page-header-sticky-sentinel {
		display: none;
	}

	/*
	 * Hide various unnessecary elements when VE is active
	 * - Edit buttons (as you can switch them in VE)
	 * - ToC button (does nothing in VE)
	*/
	#ca-ve-edit,
	#ca-edit,
	.citizen-toc__buttonCheckbox {
		display: none;
	}
}

.ve-init-mw-desktopArticleTarget {
	// Fix page actions from going under the page
	.citizen-page-header {
		z-index: @z-index-toolbar;
	}

	// Make categories interactable
	.citizen-page-footer.ve-init-mw-desktopArticleTarget-uneditableContent {
		opacity: 1;

		.catlinks {
			pointer-events: auto;
		}

		.page-info {
			opacity: 0.5;
		}
	}
}

.ve-init-mw-desktopArticleTarget-toolbarPlaceholder {
	&-bar {
		top: var( --header-size-block-start );
		border-bottom-color: var( --border-color-base );
		box-shadow: none;
	}
}

.ve-activated .ve-init-mw-desktopArticleTarget-originalContent #catlinks:hover {
	background-color: var( --background-color-button-quiet--hover );
}

// Style VE category edit button as a pill (REL 1.45+)
.ve-init-mw-desktopArticleTarget-categoryEdit {
	display: flex;
	gap: var( --space-xxs );
	align-items: center;
	align-self: flex-start;
	order: 1;
	height: 40px;
	width: 40px;
	padding: var( --space-xs );
	margin-top: auto;
	color: var( --color-base );
	cursor: pointer;

	// Hide original square brackets
	.mw-editsection-bracket {
		display: none;
	}

	a {
		display: flex;
		align-items: center;
		font-size: 0; // Hide "edit" text
		color: inherit;
		text-decoration: none;
		margin: auto;

		// Edit icon
		&::before {
			display: block;
			width: 1rem;
			height: 1rem;
			content: '';
			background-color: currentcolor;
			-webkit-mask-image: url( "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E%3Cpath d='m16.77 8 1.94-2a1 1 0 0 0 0-1.41l-3.34-3.3a1 1 0 0 0-1.41 0L12 3.23zM1 14.25V19h4.75l9.96-9.96-4.75-4.75z'/%3E%3C/svg%3E" );
			mask-image: url( "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E%3Cpath d='m16.77 8 1.94-2a1 1 0 0 0 0-1.41l-3.34-3.3a1 1 0 0 0-1.41 0L12 3.23zM1 14.25V19h4.75l9.96-9.96-4.75-4.75z'/%3E%3C/svg%3E" );
			-webkit-mask-repeat: no-repeat;
			mask-repeat: no-repeat;
			-webkit-mask-position: center;
			mask-position: center;
			-webkit-mask-size: contain;
			mask-size: contain;
		}
	}

	&:hover {
		background-color: var( --background-color-interactive-subtle--hover );
		border-radius: var( --border-radius-base );
	}

	&:focus {
		outline-color: var( --color-progressive );
	}
}
